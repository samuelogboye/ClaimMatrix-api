# ============================================================================
# CLAIMMATRIX API ENVIRONMENT CONFIGURATION
# ============================================================================
# SECURITY WARNING: Never commit the actual .env file to version control!
# This is a template file. Copy it to .env and update with your values.
# ============================================================================

# ============================================================================
# ENVIRONMENT
# ============================================================================
# Set to: development, staging, or production
# This controls security validations and logging levels
ENVIRONMENT=development

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# For local development:
# DATABASE_URL=postgresql+asyncpg://claim_matrix_user:claim_matrix_pass@localhost:5433/claim_matrix
# For Docker (use service names as hostnames):
DATABASE_URL=postgresql+asyncpg://claim_matrix_user:claim_matrix_pass@db:5433/claim_matrix

# PostgreSQL container configuration
POSTGRES_USER=claim_matrix_user
POSTGRES_PASSWORD=claim_matrix_pass
POSTGRES_DB=claim_matrix
DATABASE_ECHO=False

# PRODUCTION SECURITY:
# - Use strong passwords (minimum 16 characters, mixed case, numbers, symbols)
# - Store credentials in secrets management (AWS Secrets Manager, HashiCorp Vault, etc.)
# - Enable SSL/TLS for database connections
# - Use managed database services with automatic backups

# ============================================================================
# REDIS CONFIGURATION (for Celery)
# ============================================================================
# For local development (6378 is the HOST port mapped to Redis):
# REDIS_URL=redis://localhost:6378/0
# For Docker (6379 is the INTERNAL Redis port in Docker network):
REDIS_URL=redis://redis:6379/0

# ============================================================================
# CELERY CONFIGURATION
# ============================================================================
# For local development (6378 is the HOST port mapped to Redis):
# CELERY_BROKER_URL=redis://localhost:6378/0
# CELERY_RESULT_BACKEND=redis://localhost:6378/0
# For Docker (6379 is the INTERNAL Redis port in Docker network):
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================
APP_NAME=ClaimMatrix
APP_VERSION=1.0.0

# DEBUG MODE
# WARNING: Set to False in production! Debug mode exposes sensitive information.
DEBUG=True

API_PREFIX=/api/v1

# ============================================================================
# CORS SETTINGS
# ============================================================================
# Comma-separated list of allowed origins
# PRODUCTION: Restrict to your actual frontend domains only
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8001

# ============================================================================
# JWT AUTHENTICATION SETTINGS
# ============================================================================
# CRITICAL SECURITY REQUIREMENT:
# You MUST change JWT_SECRET_KEY in production!
#
# Generate a secure key using one of these methods:
#   openssl rand -hex 32
#   python -c "import secrets; print(secrets.token_hex(32))"
#
# NEVER:
# - Use the default value in production
# - Share the secret key
# - Commit the secret key to version control
# - Use keys shorter than 32 characters
#
# The application will refuse to start in production/staging with a weak key.
JWT_SECRET_KEY=your-secret-key-change-this-in-production-use-openssl-rand-hex-32
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# ============================================================================
# LOGGING CONFIGURATION (Optional)
# ============================================================================
# LOG_LEVEL options: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Use INFO or WARNING in production to reduce log volume
LOG_LEVEL=INFO

# Set to true to output logs in JSON format (recommended for production)
LOG_JSON_FORMAT=false

# ============================================================================
# RATE LIMITING CONFIGURATION
# ============================================================================
# Enable or disable rate limiting
RATE_LIMIT_ENABLED=true

# Default rate limit for all endpoints (requests per time period)
# Format: "number/period" where period can be: second, minute, hour, day
# Example: "100/minute" means 100 requests per minute
RATE_LIMIT_DEFAULT=100/minute

# Rate limit for authentication endpoints (login, register)
# Lower limit to prevent brute force attacks
RATE_LIMIT_AUTH=5/minute

# Rate limit for file upload endpoints
# Lower limit due to resource-intensive operations
RATE_LIMIT_UPLOAD=10/hour

# Redis URL for rate limit storage (separate database from Celery)
# For local development (6378 is the HOST port mapped to Redis):
# RATE_LIMIT_STORAGE_URL=redis://localhost:6378/1
# For Docker (6379 is the INTERNAL Redis port in Docker network):
RATE_LIMIT_STORAGE_URL=redis://redis:6379/1

# PRODUCTION NOTES:
# - Adjust limits based on expected traffic and server capacity
# - Monitor rate limit hits and adjust accordingly
# - Consider per-user rate limits for authenticated endpoints
# - Use Redis persistence for accurate rate limiting across restarts
